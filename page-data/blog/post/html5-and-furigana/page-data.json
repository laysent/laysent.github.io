{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/post/html5-and-furigana/","webpackCompilationHash":"687e338135c47159cd63","result":{"data":{"site":{"siteMetadata":{"blogTitle":"LaySent's Blog","author":"LaySent"}},"markdownRemark":{"id":"287b3410-ce41-5ea5-804d-930baf7a6cf5","html":"<section><h2>Furigana</h2><p>在日语漫画中，经常看到<ruby>注音假名<rp>(</rp><rt>Furigana</rt><rp>)</rp></ruby>，也被称为振假名或<ruby>ルビー<rp>(</rp><rt>Ruby</rt><rp>)</rp></ruby>。根据 <a href=\"https://zh.wikipedia.org/wiki/%E6%8C%AF%E5%81%87%E5%90%8D\">wiki</a> 的解释，Ruby 一词主要源自英国对 5.5 号字体的传统称呼（和编程语言 Ruby 无关），因此有时候印刷物的注音假名也被称作<ruby>ルビ<rp>(</rp><rt>Ruby</rt><rp>)</rp></ruby>。</p><p>除了一般的注音功能之外，日语中也常用注音假名来给汉字赋予新的含义。比如：<ruby>紳士<rp>(</rp><rt>hentai</rt><rp>)</rp></ruby>这个梗，写作绅士，但读作 Hentai。</p><p>旁注标记就是这种表意文字的音标印刷方式，广泛地运用于东亚文字中，如中文或日文。一般这些字是放于表意文字的上方或右边，作为文字的拼音或注解。</p></section>\n<section><h2>ruby</h2><p>在 HTML5 中，可以使用 <code class=\"language-text\">ruby</code> 标签来对文字进行旁注。一个简单的例子如下：</p><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ruby</span><span class=\"token punctuation\">></span></span>\n注<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>zhù<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rt</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span>\n音<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>yīn<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rt</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ruby</span><span class=\"token punctuation\">></span></span></code></pre></div><p>展示效果：<ruby>注<rp>(</rp><rt>zhù</rt><rp>)</rp>音<rp>(</rp><rt>yīn</rt><rp>)</rp></ruby>。在不支持 <code class=\"language-text\">ruby</code> 的浏览器中，显示效果大致为：<code class=\"language-text\">注(zhù)音(yīn)</code>。</p><p>值得一提的是，<code class=\"language-text\">ruby</code> 虽然不是一个常见的 HTML 标签，但是其基础功能在各个浏览器中的支持率其实非常高。Internet Explorer 从 IE5 就开始支持 <code class=\"language-text\">ruby</code>，之后 <code class=\"language-text\">ruby</code> 加入 HTML5 标准，各大浏览器也纷纷实现。根据 <a href=\"https://caniuse.com/#search=ruby\">Caniuse</a> 的数据，基础功能的浏览器支持率达到了 96.34%。因此，理论上来说，基本可以不用考虑不支持 <code class=\"language-text\">ruby</code> 的情况。</p><p>从上面的例子中不难看出，一个带旁注的文字主要由两个部分组成，基础的文字部分与旁注部分。对于 <code class=\"language-text\">ruby</code> 标签来说，里面的内容默认是基础的文字部分，旁注部分需要额外使用其他标签注明。可以在 <code class=\"language-text\">ruby</code> 标签内辅助声明内容格式的标签有：<code class=\"language-text\">rt</code>，<code class=\"language-text\">rp</code>，<code class=\"language-text\">rb</code>，<code class=\"language-text\">rtc</code> 和 <code class=\"language-text\">rbc</code>。其中，<code class=\"language-text\">rt</code> 和 <code class=\"language-text\">rp</code> 已经得到了大多数浏览器的支持，而 <code class=\"language-text\">rb</code>，<code class=\"language-text\">rtc</code> 和 <code class=\"language-text\">rbc</code> 目前只有 Firefox 做了适配，其他浏览器暂时还未支持。</p><p>下面介绍 <code class=\"language-text\">ruby</code> 中辅助展示旁注内容的这些标签。</p><section><h3>rp</h3><p><code class=\"language-text\">rp</code> 是 Ruby Fallback Parenthesis 的缩写，是 <code class=\"language-text\">ruby</code> 中相对特殊的标签。在支持 <code class=\"language-text\">ruby</code> 的浏览器中，<code class=\"language-text\">rp</code> 是一个不会被展示的标签（即，useragent 里设置了 <code class=\"language-text\">rp { display: none; }</code>）。但是对于不支持 <code class=\"language-text\">ruby</code> 的老式浏览器来说，没有这样的 useragent 设置，<code class=\"language-text\">rp</code> 只是被识别为一个普通的标签，表现形式和一般的行内元素无差。因此，在这些不支持 <code class=\"language-text\">ruby</code> 的浏览器中，一方面旁注系统不生效，没有文字与旁注上下排列的效果；另一方面 <code class=\"language-text\">rp</code> 的隐藏属性也不生效，会直接显示出来。这样，最终显示的文字依然是按照 HTML 书写的顺序一字排列的，<code class=\"language-text\">rp</code> 中的内容显示出来正好可以作为文本内容与旁注内容之间的分割符号，让读者可以区分出文本与旁注，不至于产生混淆。</p></section><section><h3>rt</h3><p><code class=\"language-text\">rt</code> 是 Ruby Text 的缩写，用于为文字提供旁注。这个标签必须是 <code class=\"language-text\">ruby</code> 的子标签才可以生效。</p><p>如果没有 <code class=\"language-text\">rb</code> 标签，那么 <code class=\"language-text\">rt</code> 旁注的对象是这个标签前紧跟着的内容，而旁注的具体内容写在这个标签里面；如果存在 <code class=\"language-text\">rb</code> 标签，那么每一个 <code class=\"language-text\">rt</code> 标签会和 <code class=\"language-text\">rb</code> 标签一一匹配，一段文字配一段旁注。（具体匹配见下文 <code class=\"language-text\">rb</code> 的介绍内容）</p></section><section><h3>rb</h3><p><code class=\"language-text\">rb</code> 是 Ruby Base 的缩写，用于注明被标注的对象。一般来说，<code class=\"language-text\">ruby</code> 标签内的文字，如果不包裹其他标签，本身就是被标注的对象，和额外套一个 <code class=\"language-text\">rb</code> 标签的效果是一样的。这里之所以再提供一个标签，是为了对被标注的对象做进一步的拆分，同时又不打乱原来的显示顺序。以上面的例子来说，如果没有 <code class=\"language-text\">rb</code> 标签，如果需要对文字做旁注，要写：</p><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ruby</span><span class=\"token punctuation\">></span></span>\n注<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>zhù<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rt</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span>\n音<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>yīn<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rt</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ruby</span><span class=\"token punctuation\">></span></span></code></pre></div><p>如果有了 <code class=\"language-text\">rb</code> 标签，就可以将文字和旁注分别写在一起，而不用穿插着写：</p><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ruby</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>注<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rb</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>音<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rb</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>zhù<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rt</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>yīn<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rt</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ruby</span><span class=\"token punctuation\">></span></span></code></pre></div><p>这样，最终的文字流是 <code class=\"language-text\">注音(zhùyīn)</code> 而不是 <code class=\"language-text\">注(zhù)音(yīn)</code>。<code class=\"language-text\">rt</code> 不需要紧跟着出现在 <code class=\"language-text\">rb</code> 的后面，可以先写完 <code class=\"language-text\">rb</code> 然后再按顺序写对应的 <code class=\"language-text\">rt</code>。最终的文字流结果更符合日常的使用习惯。</p><p>理论上来说，每一个 <code class=\"language-text\">rb</code> 标签都对应一个 <code class=\"language-text\">rt</code> 标签，对应的顺序是 <code class=\"language-text\">rb</code> 和 <code class=\"language-text\">rt</code> 标签分别出现的顺序。如果 <code class=\"language-text\">rb</code> 的数量少而 <code class=\"language-text\">rt</code> 多，那么多余的 <code class=\"language-text\">rb</code> 就会分配到空的 <code class=\"language-text\">rt</code>；如果 <code class=\"language-text\">rt</code> 少而 <code class=\"language-text\">rb</code> 多，最后一个 <code class=\"language-text\">rt</code> 会被应用到所有多余的 <code class=\"language-text\">rb</code> 上。</p></section><section><h3>rtc 与 rtb</h3><p><code class=\"language-text\">rtc</code> 是 Ruby Text Container 的缩写，<code class=\"language-text\">rtb</code> 是 Ruby Base Container 的缩写。</p><p>有的时候，一个文字可能需要多个旁注。比如，一个注音，一个注释。这个时候，就需要用到 <code class=\"language-text\">rtc</code> 和 <code class=\"language-text\">rbc</code> 了。</p><p><code class=\"language-text\">rtc</code> 可以对 <code class=\"language-text\">rt</code> 进行分组。默认情况下，<code class=\"language-text\">ruby</code> 标签下的 <code class=\"language-text\">rt</code> 都是在同一个分组中，分别一一对应到给定的基础文字上。使用 <code class=\"language-text\">rtc</code> 标签可以额外创建新的分组，在 <code class=\"language-text\">rtc</code> 标签下的 <code class=\"language-text\">rt</code> 会重新一一分配到基础文字上去对应，而不受已有 <code class=\"language-text\">rt</code> 分配的影响。</p><p>此外，如果两套注解需要的匹配规则是不同的，那么就需要用上 <code class=\"language-text\">rbc</code> 对 <code class=\"language-text\">rb</code> 进行分组了。上文提到，一般情况下 <code class=\"language-text\">rt</code> 会一一对应到 <code class=\"language-text\">rb</code> 上去。这在注音系统里非常方便，但是对于注释来说就不方便了，因为几个字可能同属于一个意思，无法像注音一样拆分。使用 <code class=\"language-text\">rbc</code> 对 <code class=\"language-text\">rb</code> 分组后，对于不在 <code class=\"language-text\">rbc</code> 标签内的其他标签来说，会把这个 <code class=\"language-text\">rbc</code> 中的内容看作是一块基础文字。这样，外部的 <code class=\"language-text\">rt</code> 就可以对整个文字做注释了。</p><p>举个例子：</p><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ruby</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>zh-Hant<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">ruby-position</span><span class=\"token punctuation\">:</span> under<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rtb</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>旧<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>金<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>山<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>jiù<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>jīn<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>shān<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rtb</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rtc</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">ruby-position</span><span class=\"token punctuation\">:</span> over<span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>San Francisco<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rtc</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ruby</span><span class=\"token punctuation\">></span></span></code></pre></div><p>在这个例子中，<code class=\"language-text\">rt</code> 给出了旧金山的拼音，同时 <code class=\"language-text\">rtc</code> 定义了一个新的注释，用于给出“旧金山”的英文名。在这里，注音系统是对每一个汉字单独注音的，一个 <code class=\"language-text\">rb</code> 对应一个 <code class=\"language-text\">rt</code>。但是对于 San Francisco 这个英文名来说，应该被整体应用到“旧金山”三个字上，而不是其中的任意一个字上。由于注音系统的需要，这里的每一个字已经用 <code class=\"language-text\">rb</code> 做了拆分。如果不使用 <code class=\"language-text\">rbc</code> 标签将这三个文字打包在一起，最终 <code class=\"language-text\">rtc</code> 里的文字会被应用到第一个字“旧”上，而不是整体的“旧金山”上。这是因为，根据规则，一个 <code class=\"language-text\">rt</code> 对应一个 <code class=\"language-text\">rb</code>，多余的 <code class=\"language-text\">rb</code> 会被赋予空的 <code class=\"language-text\">rt</code>（具体见之前的内容）。<code class=\"language-text\">rbc</code> 的功能就是将三个 <code class=\"language-text\">rb</code> 合并成一个，让 <code class=\"language-text\">rtc</code> 中的 <code class=\"language-text\">rt</code> 可以直接匹配。</p><p>当然，在没有 <code class=\"language-text\">rtb</code> 与 <code class=\"language-text\">rtc</code> 支持的浏览器中，也可以通过嵌套 <code class=\"language-text\">ruby</code> 标签的使用来达到类似的效果：</p><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ruby</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ruby</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>旧<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>金<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>山<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>jiù<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>jīn<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>shān<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ruby</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>San Francisco<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ruby</span><span class=\"token punctuation\">></span></span></code></pre></div></section><section><h3>简写</h3><p>在上例中，已经用到了简写的规则。这里，出于书写方便的考虑，上面介绍的这些 <code class=\"language-text\">ruby</code> 中的子标签，都可以只写开始的标签而省略闭合标签，如只写 <code class=\"language-text\">&lt;rt&gt;</code> 而不写 <code class=\"language-text\">&lt;/rt&gt;</code>。程序会在匹配到下一个标签的时候，自动闭合上一个标签。举例来说，</p><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ruby</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>注<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rb</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>音<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rb</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>zhù<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rt</span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>yīn<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rt</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rp</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ruby</span><span class=\"token punctuation\">></span></span></code></pre></div><p>可以写成</p><div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ruby</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>注<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rb</span><span class=\"token punctuation\">></span></span>音<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>(<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>zhù<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rt</span><span class=\"token punctuation\">></span></span>yīn<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rp</span><span class=\"token punctuation\">></span></span>)\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ruby</span><span class=\"token punctuation\">></span></span></code></pre></div><p>两者是等价的。</p></section><section><h3>ruby-position</h3><p><code class=\"language-text\">ruby-position</code> 是 CSS 中的一个属性，目前仍然处于草案的阶段。根据目前给出的<a href=\"https://drafts.csswg.org/css-ruby/#rubypos\">定义</a>，该属性可以配置的值有三种，分别是 <code class=\"language-text\">over</code>，<code class=\"language-text\">under</code> 和 <code class=\"language-text\">inter-character</code>。</p><p><code class=\"language-text\">over</code> 会将旁注放置于文字的上方，对于文字是竖排排列的情况，则会将旁注放置于文字的右侧。</p><p><code class=\"language-text\">under</code> 会将旁注放置于文字的下方，对于文字是竖排排列的情况，则会将旁注放置于文字的左侧。</p><p><code class=\"language-text\">inter-character</code> 主要是为台湾地区的繁体字注音设计的。在这种模式下，注音会被放置于文字的中间，且注音的部分会强制使用 <code class=\"language-text\">vertical-rl</code> 来显示。</p><p>目前，Firefox 支持了 <code class=\"language-text\">over</code> 和 <code class=\"language-text\">under</code> 两种属性，<code class=\"language-text\">inter-character</code> 还没有得到支持。对于 Chrome 来说，<code class=\"language-text\">-webkit-ruby-position</code> 是一个替代方案，它接受 <code class=\"language-text\">before</code> 或 <code class=\"language-text\">after</code> 两种属性，分别对应标准中的 <code class=\"language-text\">over</code> 和 <code class=\"language-text\">under</code> 属性。<code class=\"language-text\">inter-character</code> 同样没有得到支持。</p></section><section><h3>ruby-align</h3><p><code class=\"language-text\">ruby-align</code> 是 CSS 中的一个属性，同样处于草案阶段。根据目前给出的<a href=\"https://drafts.csswg.org/css-ruby/#rubypos\">定义</a>，该属性可以配置的值有四种，分别是 <code class=\"language-text\">start</code>，<code class=\"language-text\">center</code>，<code class=\"language-text\">space-between</code> 和 <code class=\"language-text\">space-around</code>。</p><p>这里几个属性的具体效果，可以参考 <code class=\"language-text\">flex</code> 中，<code class=\"language-text\">justify-content</code> 的属性展示效果。在对应基础文字的总宽度内，旁注文字可以选择<ruby>前对齐<rp>(</rp><rt>start</rt><rp>)</rp></ruby>，<ruby>居中<rp>(</rp><rt>center</rt><rp>)</rp></ruby>，<ruby>旁注间空白均匀分布<rp>(</rp><rt>space-between</rt><rp>)</rp></ruby>或<ruby>旁注每个元素均匀分配空间<rp>(</rp><rt>space-around</rt><rp>)</rp></ruby>。</p></section></section>\n<section><h2>remark-ruby</h2><p>考虑到 <code class=\"language-text\">ruby</code> 的书写比较的繁琐，在 Markdown 中如果使用 HTML 的方式直接书写，多少有些麻烦（特别是每次还要加上 <code class=\"language-text\">rp</code> 的部分）。因此，写了一个简单的库 <a href=\"https://github.com/laysent/remark-ruby\">remark-ruby</a>，用于增加一个额外的 Markdown 语法，方便这种旁注的书写。</p><p>简单来说，只需要在 Markdown 中写 <code class=\"language-text\">{文字}^(旁注)</code>，插件就会生成 <code class=\"language-text\">&lt;ruby&gt;文字&lt;rp&gt;(&lt;/rp&gt;&lt;rt&gt;旁注&lt;/rt&gt;&lt;rp&gt;)&lt;/rp&gt;&lt;/ruby&gt;</code> 这样的 HTML 内容。其中，<code class=\"language-text\">rp</code> 的部分可以通过插件配置自定义。</p><p>虽然目前的浏览器暂时对 <code class=\"language-text\">rb</code> 这类的标签支持还少，但插件也试图对部分功能做了增强。支持用 <code class=\"language-text\">{[文][字]}^([旁][注])</code> 这样的语法来支持旁注的区块划分（需要 <code class=\"language-text\">rb</code> 的支持）。</p><p>未来也可以考虑对语法做进一步的扩展。例如，可以考虑增加诸如 <code class=\"language-text\">{文字}^(上旁注 1)^(上旁注 2)_(下旁注)</code> 这样的语法来支持多个旁注（需要 <code class=\"language-text\">ruby-position</code> 的支持）。</p></section>","frontmatter":{"title":"Html5 的旁注标记","date":"2019-03-16","modified":"2019-04-07","description":"本文主要介绍了 HTML5 中的旁注标记 ruby 及其使用"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/html5-and-furigana/","previous":{"fields":{"slug":"/baseline-and-progressive-jpeg/","type":"blog"},"frontmatter":{"title":"Baseline & Progressive JPEG","category":"Web","tags":"Web, Graphics"}},"next":{"fields":{"slug":"/git-commit-message/","type":"blog"},"frontmatter":{"title":"Git Commit Message","category":"Tools","tags":"Tools"}}}}}