{"componentChunkName":"component---src-templates-til-js","path":"/til/2019-10-23_webpack-file-limit-error","result":{"data":{"markdownRemark":{"id":"6e82ef91-2e1a-58b0-879c-7e2818cfb8fd","html":"<p>在 Webpack 的配置中，有一个 <code class=\"language-text\">performance</code> 选项。根据 <code class=\"language-text\">performance</code> 中的配置，Webpack 可以针对打包后的结果的实际大小，进行警告或报错。</p>\n<p>具体的配置参数如下：</p>\n<ul>\n<li><code class=\"language-text\">performance.hints</code></li>\n</ul>\n<p>这个参数用于告诉 Webpack 最终产生的报告需要以什么样的方式呈现出来。可能的配置包括 <code class=\"language-text\">false</code>，<code class=\"language-text\">&#39;warning&#39;</code> 和 <code class=\"language-text\">&#39;error&#39;</code>。建议在 CI 中将这部分配置成 <code class=\"language-text\">&#39;error&#39;</code>，保证过大体积的文件无法被发布到线上。</p>\n<p>而具体多大的文件算“过大”，则需要用到下面提到的两个参数：</p>\n<ul>\n<li><code class=\"language-text\">performance.maxEntrypointSize</code></li>\n<li><code class=\"language-text\">performance.maxAssetSize</code></li>\n</ul>\n<p>前者表示入口文件能接受的最大文件尺寸（单位是 byte），后者表示其他生成的文件所能接受的最大尺寸（默认情况下包括了所有的 CSS，非入口 JS 文件，以及字体、图片等文件）。</p>\n<p>比如，入口 JavaScript 文件不能超过 250kb，而其余文件不能超过 100kb：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  performance<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    maxEntrypointSize<span class=\"token punctuation\">:</span> <span class=\"token number\">250_000</span><span class=\"token punctuation\">,</span>\n    maxAssetSize<span class=\"token punctuation\">:</span> <span class=\"token number\">100_000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>默认情况下，除了 <code class=\"language-text\">.map</code> 文件外，所有其他产生的文件都会被考虑在内。如果希望改变这个默认的行为，可以使用下面的这个参数：</p>\n<ul>\n<li><code class=\"language-text\">performance.assetFilter</code></li>\n</ul>\n<p>比如，只考虑 JavaScript 文件：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  performance<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">assetFilter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">assetFilename</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> assetFilename<span class=\"token punctuation\">.</span><span class=\"token function\">endsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>官方文档在<a href=\"https://webpack.js.org/configuration/performance/\">这里</a>。</p>","frontmatter":{"title":"Webpack File Limit Error","category":"Build","date":"2019-10-23"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"time":"2019-10-23","title":"Webpack File Limit Error","previous":{"time":"2019-10-22","title":"Document DesignMode"},"next":{"time":"2019-10-24","title":"noindex & nofollow"}}}}