{"componentChunkName":"component---src-templates-til-js","path":"/til/2019-10-11_shape-rendering","webpackCompilationHash":"d0c1c456129354e33ddb","result":{"data":{"markdownRemark":{"id":"9018df9c-3116-5212-8829-3e63b77ba5cd","html":"<p>在浏览器渲染 SVG 的时候，可以通过 <code class=\"language-text\">shape-rendering</code> 这一属性，来控制浏览器对 SVG 抗锯齿效果的展示。<code class=\"language-text\">shape-rendering</code> 支持从三个纬度来权衡 SVG 的渲染效果，这三个纬度分别是：速度、曲线精细度以及曲线的锐利程度。</p>\n<ul>\n<li><code class=\"language-text\">auto</code>，这个是默认值，表示由浏览器来决定改如何显示</li>\n<li><code class=\"language-text\">optimizeSpeed</code>，顾名思义，这个要求浏览器以渲染的速度优先，抗锯齿可能会被浏览器关闭</li>\n<li><code class=\"language-text\">crispEdges</code>，这个选项要求浏览器以曲线的锐利程度为第一优先级。这种情况下，速度和精细度的优先级会被降低。浏览器可能会关闭抗锯齿，或者只针对接近垂直和水平的线才开启抗锯齿的功能。同时，浏览器可能会微调线的位置和宽度，以适应显示器的物理像素点</li>\n<li><code class=\"language-text\">geometricPrecision</code>，这个选项要求浏览器以更好的精度来渲染图像，为此可能会牺牲渲染的性能（速度）和边界的清晰度</li>\n</ul>\n<p>下图从左到右分别展示了 <code class=\"language-text\">geometricPrecision</code>，<code class=\"language-text\">crispEdges</code> 和 <code class=\"language-text\">optimizeSpeed</code> 三种情况下，同一个圆的显示效果。</p>\n<svg viewBox=\"0 0 640 200\" xmlns=\"http://www.w3.org/2000/svg\" width=\"740\">\n  <circle cx=\"100\" cy=\"100\" r=\"100\" shape-rendering=\"geometricPrecision\" fill=\"#ff8787\" />\n  <circle cx=\"320\" cy=\"100\" r=\"100\" shape-rendering=\"crispEdges\" fill=\"#da77f2\" />\n  <circle cx=\"540\" cy=\"100\" r=\"100\" shape-rendering=\"optimizeSpeed\" fill=\"#748ffc\" />\n</svg>\n<p>不难看出，<code class=\"language-text\">geometricPrecision</code> 的效果是最平滑的，但是边缘清晰度不足；<code class=\"language-text\">crispEdges</code> 边缘很锐利，但是有一些毛边（越是低分辨率的屏幕，效果越明显）；<code class=\"language-text\">optimizeSpeed</code> 的显示效果也明显有毛边，不过效果和 <code class=\"language-text\">crispEdges</code> 略微不同，可以看得出底层使用的算法是不太一样的。</p>\n<p>上图的 HTML 代码如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>0 0 640 200<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>740<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>circle</span>\n    <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">shape-rendering</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>geometricPrecision<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#ff8787<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>circle</span>\n    <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">shape-rendering</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>crispEdges<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#da77f2<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>circle</span>\n    <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>100<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">shape-rendering</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>optimizeSpeed<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#748ffc<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>另外，除了在 SVG 中直接写属性之外，也可以通过 CSS 来给 SVG 加上相关的 <code class=\"language-text\">shape-rendering</code> 值：</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">svg</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">shape-rendering</span><span class=\"token punctuation\">:</span> geometricPrecision<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>MDN 的相关介绍见<a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/shape-rendering\">这里</a>。</p>","frontmatter":{"title":"shape-rendering","category":"CSS","date":"2019-10-11"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"time":"2019-10-11","title":"shape-rendering","previous":{"time":"2019-10-10","title":"iconfont to svg"},"next":{"time":"2019-10-14","title":"Parse GitConfig via Node"}}}}