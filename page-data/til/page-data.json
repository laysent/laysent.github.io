{"componentChunkName":"component---src-pages-til-js","path":"/til/","webpackCompilationHash":"bda10dc66575c4b19d6c","result":{"data":{"site":{"siteMetadata":{"title":"LaySent's Site"}},"allMarkdownRemark":{"edges":[{"node":{"id":"0621272a-d2db-5fd8-a510-b94715d9e39d","html":"<p><a href=\"http://www.ecma-international.org/ecma-262/9.0/#sec-object-initializer\">ES2018</a> 增加了 Object Spread 操作符的官方支持。Object Spread 操作符和 <code class=\"language-text\">Object.assign</code> 的一些区别，可以参考<a href=\"https://2ality.com/2016/10/rest-spread-properties.html#spread-defines-properties-objectassign-sets-them\">这篇文章</a>。</p>\n<p>在 JavaScript 执行 Object Spread 操作符的时候，需要进行如下的几步操作：</p>\n<ol>\n<li>确定对象有哪些自己的属性。原型链上的部分是不会被 Object Spread 操作符接收的，举个例子：</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> parent<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    current<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      enumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// output => { current: 2 }</span></code></pre></div>\n<ol start=\"2\">\n<li>确定第一步拿到的属性中，有那些是可枚举的（enumerable）。不可枚举的部分，不会被接收，举个例子：</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">{</span> parent<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    current<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      enumerable<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      value<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>obj <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// output => { }</span></code></pre></div>\n<ol start=\"3\">\n<li>分别获取到这些属性的值</li>\n</ol>\n<p>根据以上的规则，现在可以考虑这样一个场景：假设需要一个 Proxy 来修改访问对象属性的行为，比如对对象任意属性的取值，都从它的某一个子属性中去拿。例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">:</span> <span class=\"token string\">'inner-value'</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* todo */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> proxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>proxy<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => output: inner-value</span></code></pre></div>\n<p>这里的 handler 并不难写，只需要：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> target<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// or:</span>\n    <span class=\"token comment\">// return Reflect.get(target.child, key);</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>现在，如果需要 Proxy 也同样可以支持 Object Spread 的功能，那么就需要对 <code class=\"language-text\">handler</code> 做更多的处理。从上面的分析来看，第一步获取自有属性，需要用到 <code class=\"language-text\">ownKeys</code>；第二步获取可枚举属性，需要用到 <code class=\"language-text\">getOwnPropertyDescriptor</code>；最后一步获得属性值，依然需要 <code class=\"language-text\">get</code>。</p>\n<p>代码如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">:</span> <span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span> child<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> key<span class=\"token punctuation\">:</span> <span class=\"token string\">'inner-value'</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> handler <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">get</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Reflect<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">ownKeys</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Reflect<span class=\"token punctuation\">.</span><span class=\"token function\">ownKeys</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">getOwnPropertyDescriptor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">target<span class=\"token punctuation\">,</span> key</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> Reflect<span class=\"token punctuation\">.</span><span class=\"token function\">getOwnPropertyDescriptor</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">.</span>child<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> proxy <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>proxy <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => output: { key: 'inner-value' }</span></code></pre></div>","frontmatter":{"date":"2019-07-09","title":"Object Spread and Proxy","category":"JavaScript"}}},{"node":{"id":"9c1aae5c-58eb-5cbd-9687-6bec0b7d6a39","html":"<p><code class=\"language-text\">rev-parse</code> 并不是 Git 中一个不常用的命令。Git 的一些命令底层会使用 <code class=\"language-text\">rev-parse</code> 来处理输入的参数。</p>\n<p>通过 <code class=\"language-text\">rev-parse</code> 可以获得一些有用的 Git 数据，比如：</p>\n<ul>\n<li>获取当前的 commit id</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> rev-parse HEAD</code></pre></div>\n<ul>\n<li>获取当前的分支名</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> rev-parse --symbolic-full-name --abbrev-ref HEAD</code></pre></div>","frontmatter":{"date":"2019-07-08","title":"git rev-parse","category":"Git"}}},{"node":{"id":"d7d6af7e-2689-5c67-9b4e-cc8ee2e6d64d","html":"<p>在 TypeScript 中，如果希望一个变量只能取某几个固定值中的一个，可以这么写：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> Type <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> a<span class=\"token punctuation\">:</span> Type <span class=\"token operator\">=</span> <span class=\"token string\">'a'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ✔</span>\n<span class=\"token keyword\">const</span> c<span class=\"token punctuation\">:</span> Type <span class=\"token operator\">=</span> <span class=\"token string\">'c'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ✖</span></code></pre></div>\n<p>然而，在实际的开发过程中，可能会遇到这样的需求：希望 TypeScript 可以限定某一个类型只能取某几个固定的值，同时这几个值又可以组成一个数组，方便 JavaScript 在运行时动态的执行匹配功能（如 <code class=\"language-text\">Array.prototype.some</code>）。</p>\n<p>如果直接尝试在 TypeScript 中写数组，实际无法达到预想的效果：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> Type <span class=\"token operator\">=</span> list<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Type = string</span></code></pre></div>\n<p>这是因为，TypeScript 默认 <code class=\"language-text\">list</code> 的类型是 <code class=\"language-text\">string[]</code>，而不是 <code class=\"language-text\">(&#39;a&#39; | &#39;b&#39;)[]</code>。因此，在转化成 <code class=\"language-text\">Type</code> 的时候，得到的结果是更宽泛的字符串类型，而不是限定死的两个固定值。这其中，一个很重要的原因是 JavaScript 语言的动态性。数组随时可以被加入/删除元素，因而默认只能假设这是一个字符串类型的数组，而不能过多约束。</p>\n<p>为了达到目的，有以下几个变通的写法：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> list<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> Type <span class=\"token operator\">=</span> list<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Type = 'a' | 'b';</span></code></pre></div>\n<p>这种写法比较啰嗦，重新写了一遍完整的数组用于定死类型的选择范围。</p>\n<p>也可以通过写一个辅助函数来达到类似的效果：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">declare</span> <span class=\"token keyword\">const</span> tupleStr<span class=\"token punctuation\">:</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args<span class=\"token punctuation\">:</span> <span class=\"token constant\">T</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">T</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> list <span class=\"token operator\">=</span> <span class=\"token function\">tupleStr</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> Type <span class=\"token operator\">=</span> list<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Type = 'a' | 'b';</span></code></pre></div>\n<p>在 Ant Design 中可以找到<a href=\"https://github.com/ant-design/ant-design/blob/65eb713fe897f65bbf187e215c664e5f9b468252/components/_util/type.ts#L5\">类似的写法</a>。这里也有一个类似的 <a href=\"https://gist.github.com/jcalz/381562d282ebaa9b41217d1b31e2c211\">gist</a>。</p>\n<p>注：上述这种写法需要 TypeScript 3.0 的<a href=\"https://github.com/Microsoft/TypeScript/pull/24897\">支持</a>。</p>\n<p>当然，上述的方案或多或少都需要额外写一些东西，有些麻烦。在 TypeScript 3.4 中，可以通过 <code class=\"language-text\">as const</code> 这个语法来告知 TypeScript 数组是静态的、并不会增加或者减少内容。有了这样的前提假设，TypeScript 就可以更好的进行类型推导，把实际的类型结果限制到已知的几个有限的值范围内。例子如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> list1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">as</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> list2 <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">const</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'b'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> Type1 <span class=\"token operator\">=</span> list1<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> Type2 <span class=\"token operator\">=</span> list2<span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>上述两种写法是等价的（参考<a href=\"https://github.com/Microsoft/TypeScript/pull/29510\">这里</a>），都可以达到目的。另外，由于在 TypeScript 中限制了数组，之后想要在数组中做改动都是会导致编译器报错的。</p>\n<p><a href=\"https://stackoverflow.com/questions/45251664/typescript-derive-union-type-from-tuple-array-values\">参考</a></p>","frontmatter":{"date":"2019-07-04","title":"Derive Union Type from Tuple/Array","category":"TypeScript"}}},{"node":{"id":"583cc2df-00e4-5b29-bac8-51bd2ce6d8c9","html":"<p><code class=\"language-text\">tldr</code> 是一个社区维护的命令工具，可以用于输出某一个命令的说明文档。相比于 <code class=\"language-text\">man</code> 详尽的文档，<code class=\"language-text\">tldr</code> 更侧重于例子。通过具体的使用场景，介绍该命令一些常用的方法。</p>\n<p><code class=\"language-text\">tldr</code> 相关的一些链接地址：<a href=\"https://github.com/tldr-pages/tldr\">GitHub</a>，<a href=\"https://tldr.sh/\">官方网站</a>。</p>\n<p>安装 <code class=\"language-text\">tldr</code> 可以使用 <code class=\"language-text\">brew</code>：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> tldr</code></pre></div>\n<p>比如，需要了解 <code class=\"language-text\">tar</code> 的使用方法，可以运行下面的命令：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">tldr <span class=\"token function\">tar</span></code></pre></div>\n<p>运行的结果如下：</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/afb42628221addee006643b75e3c5988/04a72/2019-07-03-tldr-screenshot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 74.28571428571428%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABrklEQVQ4y5WTaVLrQAyEc554t2dfnUDgwf3v00+SYyoUAcKPrvEkVe2v1fLBBw/jNKZpwrFp0HXdF7Vte/f3ezo452CMxjiOmOcZfd+jIeOmbcSoub6Enx8xPtRa8f7+hsvlGW//XlFLgTUGgcitNXDW/o2QqVJyyDWinDLyVetzhQ8Oy7L80ZBmF6xCjB55zQjJI+QAR2ZMyIa3sR8yTN4gR4fTZRXKtCY4Z6GVkviKzubG7CfjA7frrN5EpiF7KckTqYsWnu5c2F7KbvadKc2QCB0RUsx6rogc2Vs8vZwxLRNmvTXf9d2m3wjZsBBZYcOnKrFjDZjUhMUsUDRf7Uheix4yTMEikSnPrp6LxGay3VDZ7eT7x0527felRJpZopipJBRqOhJtP/YYpgHjPIokvpo/Ed7OdZeUEqhlnhsTRtpHLoIpPVFvd9rHK6Gi+K44OXWgIrOFCQYmGrmLYTS0h1RMWQtRRlnolKMo0H5qSsCFcDn9QOSkj+dxkHOXfClcykokp8tJvhCOxjOcSMfjURb7Xry7kcdhRN+0GDp+84CB3ix/Npse/eR2/Qc7FNr+H6tgOQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"tldr command result\"\n        title=\"\"\n        src=\"/static/afb42628221addee006643b75e3c5988/b9e4f/2019-07-03-tldr-screenshot.png\"\n        srcset=\"/static/afb42628221addee006643b75e3c5988/cf440/2019-07-03-tldr-screenshot.png 148w,\n/static/afb42628221addee006643b75e3c5988/d2d38/2019-07-03-tldr-screenshot.png 295w,\n/static/afb42628221addee006643b75e3c5988/b9e4f/2019-07-03-tldr-screenshot.png 590w,\n/static/afb42628221addee006643b75e3c5988/04a72/2019-07-03-tldr-screenshot.png 840w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>注：<code class=\"language-text\">tldr</code> 的全称是 Too Long; Don’t Read。可以理解成“摘要”的意思。</p>","frontmatter":{"date":"2019-07-03","title":"Command `tldr`","category":"Bash"}}},{"node":{"id":"fb68eb7a-9f89-58aa-b99f-46cf66fee510","html":"<p><code class=\"language-text\">Array.from</code> 是 JavaScript 中一个较新的 API，可以将一个类数组或可迭代对象转化成一个真正的数组。</p>\n<p>类数组（array-like）常见于 DOM API 中取到的数据，比如 <code class=\"language-text\">.querySelectorAll</code>。得到的结果有 <code class=\"language-text\">.length</code> 属性，也可以通过下标获取到数据，但是本身却不是一个数组，没有 <code class=\"language-text\">Array.prototype</code> 上的 API 可以直接用。</p>\n<p>可迭代对象则是指那些定义了 <code class=\"language-text\">Symbol.iterator</code> 属性的对象。</p>\n<p><code class=\"language-text\">Array.from</code> 可以将上述的两种对象直接转化成一个标准的数组：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> iterable <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">*</span><span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>iterator<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">yield</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">yield</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>iterable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => [1, 2];</span>\n\n<span class=\"token keyword\">const</span> arrayLike <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>arrayLike<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => [span, span, ...]</span></code></pre></div>\n<p>除了上述常见的应用之外，<code class=\"language-text\">Array.from</code> 还有一些特殊的应用。</p>\n<p>首先，只要指定了 <code class=\"language-text\">length</code> 属性，<code class=\"language-text\">Array.from</code> 就可以创建一个数组。这一行为可以用来创建一个指定长度的数组：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => [0, 1, 2, 3, 4]</span></code></pre></div>\n<p>其次，<code class=\"language-text\">Array.from</code> 函数其实接受不止一个参数。第二个参数是一个 map 函数，第三个参数是 <code class=\"language-text\">thisArg</code>，用于指定 map 函数的 <code class=\"language-text\">this</code> 对象。有了这个 map 函数的支持，上面这个例子就可以进一步改写成：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>在转化 DOM 类数组的时候，直接通过指定 map 函数进行进一步的转化，是比较方便的。可以省略一个 <code class=\"language-text\">.map</code> 函数的嵌套，也节省一个中间数组对象的创建。</p>\n<p><code class=\"language-text\">Array.prototype.map</code> 函数可以指定 <code class=\"language-text\">thisArg</code>，在 <code class=\"language-text\">Array.from</code> 中也可以通过第三个参数指定 <code class=\"language-text\">thisArg</code>。以下是一个例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> mapper <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  shift<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shift <span class=\"token operator\">+</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nArray<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> mapper<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">,</span> mapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => [1, 2, 3, 4, 5];</span></code></pre></div>\n<p>上述写法等价于：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>mapper<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">,</span> mapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"date":"2019-07-02","title":"Array.from","category":"JavaScript"}}},{"node":{"id":"a15d5ec3-f51e-5b02-b94e-755ae016d367","html":"<p><code class=\"language-text\">object-fit</code> 这个 CSS 样式，是针对<strong>可替换元素</strong>（replaced element）设计的。一般来说，常见的可替换元素包含图片（<code class=\"language-text\">img</code>）或是视频（<code class=\"language-text\">video</code>）。这些可替换元素的大小是事先不确定的，在实际展示的时候，需要一定的规则来决定元素实际如何被放置到元素框中去。</p>\n<p>以下是几种 <code class=\"language-text\">object-fit</code> 的值及对应的显示效果（每种类型显示两个图片，第一张图片的原始尺寸大于元素显示的尺寸，第二张图片的原始尺寸小于元素显示的尺寸）：</p>\n<style>\np.container-2019-07-01 {\n  display: flex;\n  justify-content: center;\n}\np.container-2019-07-01 a {\n  box-shadow: none;\n}\np.container-2019-07-01 a img {\n  width: 500px;\n  height: 400px;\n  border: 3px solid red;\n  display: block;\n}\n</style>\n<section><h2>fill</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:fill\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:fill\" />\n  </a>\n</p><ul>\n<li>宽高比例：不保持</li>\n<li>显示范围：占满元素</li>\n<li>可能影响：显示结果宽高比失真；显示结果比原始尺寸大</li>\n</ul></section>\n<section><h2>contain</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:contain\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:contain\" />\n  </a>\n</p><ul>\n<li>宽高比例：保持</li>\n<li>显示范围：至少一轴占满，整体（另一轴）不超过元素</li>\n<li>可能影响：出现黑边（<a href=\"https://en.wikipedia.org/wiki/Letterboxing_(filming)\">letterboxed</a>）；显示结果比原始尺寸大</li>\n</ul></section>\n<section><h2>cover</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:cover\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:cover\" />\n  </a>\n</p><ul>\n<li>宽高比例：保持</li>\n<li>显示范围：至少一轴占满，整体（另一轴）可以超过元素</li>\n<li>可能影响：超出显示范围；显示结果比原始尺寸大</li>\n</ul></section>\n<section><h2>none</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:none\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:none\" />\n  </a>\n</p><ul>\n<li>宽高比例：保持</li>\n<li>显示范围：原始尺寸</li>\n<li>可能影响：超出显示范围</li>\n</ul></section>\n<section><h2>scale-down</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:scale-down\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:scale-down\" />\n  </a>\n</p><p>使用 <code class=\"language-text\">none</code> 或者 <code class=\"language-text\">contain</code> 的规则进行显示。具体选择哪个规则，要看两个规则生成的最终效果，哪一个更小。换句话说，如果元素的原始尺寸两轴都小于元素的显示范围，就使用 <code class=\"language-text\">none</code> 进行显示，显示结果是原始元素的原始尺寸；否则就是用 <code class=\"language-text\">contain</code> 的方式进行显示，用黑边的方式将元素压缩到显示范围内完整显示。</p></section>","frontmatter":{"date":"2019-07-01","title":"object-fit","category":"CSS"}}},{"node":{"id":"cec5a3cb-1522-55c1-8979-661c87ecb4e9","html":"<p><a href=\"https://www.desmos.com/calculator\">desmos</a> 是一个在线的网站，可以用于绘制数学表达式对应的函数图像。</p>\n<p>生成的结果可以通过链接分享，也可以生成 PNG 格式的图片下载到本地。</p>\n<p>以下是一个例子：</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e68ad8bbebf7e4cb6b0be8fc408023d/8ff1e/2019-06-30-desmos-graph.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAACmklEQVQ4y41U2W7TQBTN/38C4qWAStNstPACEryCQKSqVJoFozTx1ixOHK/jJT3cO/ZYk1IED1ee8dx75tzlTCvPc+iWpimKhwd4377C6pzBvhjg+vkz3PU6sGnvDb+jBJAmCbIsQ1kUSNIM1jpAQesWg/ABmwQkx5wC/NsfsM7P4L69wLx7jjsym0D98RgFnScx+eUZgQmYqwCpEDiU5V8AywMiy4Td78K5fFMBdtpwBj1EroP8cEAmUsQJga0ZLENBsQ3DxynndCDCEPagD5dSXhAzCUjgIopQHkpExNBc7SGISFFUpEpmKIgqg7DxOo7jak9M3Q/vYRHL6ekr/CK7//SRfFICSzFzPAmaafEM2lLpKksISDBLasxGNqYNo/0axssT+NdXSKgc5tKXYDn5izqOyRw1RU+Zb+XCh7OZbMSi38OcQP35AtYukcHsI7S4JuU/mlKnzmuul/PuksBOYXS7MO/9pgFJfbGenWTIqLxQpoBl15jl7Q2MFycYfRnSfILmLj/202IP1P3Wfr8HWxAE0nzfR/UvQBSF2O18XH0ewl0uERNj5bvb7Y7i1Lo1nU5hWVZzYJom7W1ENDYbbwvDXGH804Dr2M2F/HUcR5r6xzYajaouK+qcPteGFSCyHPYmlDMZBlUWnJJKT9T101NmnKOmSONZZAXQ0KYkK9YqgzEDVTs2NXe6NV2uQHMZfKSAmnlU105vhgLUVdYoRY0Ag+kKSOoRsm0bnuc1zJSiWARKJUdK4ZqpNB8rgM11XdlVvXZSUdocNkqp3rPq1RB1DZUCVNH/J+Wmhvw4Vu9Z9WrojgpQjca/ACVDa109jkX9U9VIl+N2u30SUDwlPSmZWn5MWZ8t3nPgZDKRLNUc6n66dPn8Nwam94/N3nKrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"desmos-graph\"\n        title=\"\"\n        src=\"/static/8e68ad8bbebf7e4cb6b0be8fc408023d/b9e4f/2019-06-30-desmos-graph.png\"\n        srcset=\"/static/8e68ad8bbebf7e4cb6b0be8fc408023d/cf440/2019-06-30-desmos-graph.png 148w,\n/static/8e68ad8bbebf7e4cb6b0be8fc408023d/d2d38/2019-06-30-desmos-graph.png 295w,\n/static/8e68ad8bbebf7e4cb6b0be8fc408023d/b9e4f/2019-06-30-desmos-graph.png 590w,\n/static/8e68ad8bbebf7e4cb6b0be8fc408023d/8ff1e/2019-06-30-desmos-graph.png 800w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>对应的在线观看地址：<a href=\"https://www.desmos.com/calculator/zthodlfe0t\">这里</a></p>","frontmatter":{"date":"2019-06-30","title":"Draw Math Equation","category":"Service"}}},{"node":{"id":"0d5fe6ae-1dd1-5f37-b4d9-ee8cec9f7618","html":"<p>在一个表单中敲击回车按钮，默认会触发 <code class=\"language-text\">&lt;form&gt;</code> 的 submit 事件。当 <code class=\"language-text\">&lt;form&gt;</code> 里面有 <code class=\"language-text\">&lt;button type=&quot;submit&quot;&gt;</code> 按钮的时候，敲击回车会先触发 <code class=\"language-text\">button</code> 的 click 事件，再触发 <code class=\"language-text\">form</code> 的 submit 事件。</p>\n<p>因为有了这样的机制，在一个表单中，只要指定了 submit 按钮，那么不论是点击按钮还是直接按回车，都可以触发相同的 click 事件，达到同样的代码提交功能。这使得代码可以很容易的复用，不需要额外的工作量就可以让鼠标和键盘都能够方便的提交表单。</p>\n<p>然而在实际开发的过程中，因为组件的划分，有时候不能做到 <code class=\"language-text\">&lt;button type=&quot;submit&quot;&gt;</code> 放在 <code class=\"language-text\">&lt;form&gt;</code> 中。HTML5 中，增加了 <code class=\"language-text\">button</code> 的 <code class=\"language-text\">form</code> 属性，可以用于关联表单和表单外的提交按钮。</p>\n<p>举例如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">form</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>form-id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Submit<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>在上述代码中，button 存在于 form 的外面，理论上和 form 是没有关联的。但是，因为 <code class=\"language-text\">form</code> 字段的存在，使得 form 和 button 被关联了起来。这样，和 button 在 form 中的表现形式一样，在 form 内敲击回车，就可以触发 button 的 click 事件。</p>\n<p>注：如果 click 事件和 submit 事件（如果定义了）都没有 <code class=\"language-text\">event.preventDefault()</code>，那么就会触发默认的 form 提交流程，会造成页面提交。如果 form 没有指定提交的地址，那么就会提交到当前页面。这可能并不是预期中的行为。</p>","frontmatter":{"date":"2019-06-27","title":"Submit Button outside Form","category":"HTML"}}},{"node":{"id":"d55e3129-f74f-5516-8a27-731d76fd1a88","html":"<p>在使用服务器编译上线包的过程中，可能会使用 nvm 来管理编译使用的 Node.js 版本。此时，运行时 Node.js 的二进制文件和实际服务器本身的 Node.js 文件将会是不同的。</p>\n<p>这样做的好处是可以隔离，保证编译的环境是稳定的。</p>\n<p>但是，当 npm 试图运行 Node.js 的时候，就要格外小心了。默认情况下，npm 会使用 path 中定义的 Node.js 版本。而对于打包服务器来说，这个 path 上的 Node.js 很可能并不是 nvm 管理的那个版本。</p>\n<p>举个例子，如果 <code class=\"language-text\">package.json</code> 中定义了 <code class=\"language-text\">postinstall</code> 的脚本，如下；</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"postinstall\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"some-cli\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>那么，在 <code class=\"language-text\">yarn install</code> 之后，执行这个 <code class=\"language-text\">postinstall</code> 的过程中，<code class=\"language-text\">some-cli</code> 需要 Node.js 来执行，而 npm 使用的 Node.js 是 path 上的默认版本，和 nvm 管理的并不是同一个。命令行会有如下的报错：</p>\n<blockquote>\n<p>npm WARN lifecycle The node binary used for scripts is xxx but npm is using xxx itself. Use the <code class=\"language-text\">--scripts-prepend-node-path</code> option to include the path for the node binary npm was executed with.</p>\n</blockquote>\n<p>正如报错指出的，为了修正这个问题，需要用到 <code class=\"language-text\">scripts-prepend-node-path</code>。这样，当 npm 需要 Node.js 来执行代码的时候，会选择和自身匹配的 Node.js 版本，而不是默认 path 上的版本。（<a href=\"https://docs.npmjs.com/cli/run-script.html\">文档</a>）</p>\n<p>除了每次运行时加上命令行参数之外，一个比较简单的方法是使用 npm config 设置相对应的参数：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> config <span class=\"token keyword\">set</span> scripts-prepend-node-path<span class=\"token operator\">=</span>true</code></pre></div>\n<p>或是在 .npmrc 中加上</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">scripts-prepend-node-path true</code></pre></div>\n<p>设置完后，就不会再有报错了。</p>","frontmatter":{"date":"2019-06-26","title":"scripts-prepend-node-path","category":"Node.js"}}},{"node":{"id":"027a6b74-b435-51aa-b2d5-486e2833b5a2","html":"<p>在 Chrome 浏览器中，有专门用于页面截屏的扩展应用。其实 Chrome 自身也提供了截屏的工具。</p>\n<p>要使用 Chrome 自带的页面截屏方案，首先需要打开 Chrome DevTools。接下来，按 Cmd + Shift + P 打开指令搜索框。在搜索框中，搜索 <code class=\"language-text\">screenshots</code> 就可以找到和截屏相关的各个命令：</p>\n<ul>\n<li>Capture area screenshot - 可以截取<strong>页面</strong>某一个区域的图像（用鼠标选择）</li>\n<li>Capture full size screenshot - 可以截取整个页面的图像</li>\n<li>Capture node screenshot - 可以截取当前 DevTool 中选中的元素的图像</li>\n<li>Capture screenshot - 可以截取当前可视区域的图像</li>\n</ul>\n<p>其中，<code class=\"language-text\">Capture node screenshot</code> 是一个比较有意思的功能。在 DevTool 中选定了某一个元素（Element）之后，执行这个命令，就会将这个元素自身的区域截图。当然，元素所在区域内，由于排版的缘故，还存在父元素，子元素或是其他什么元素的内容。在执行截图命令的时候，这些内容也会被包含进去。</p>","frontmatter":{"date":"2019-06-25","title":"Screenshot in Chrome","category":"Chrome"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":true}}}