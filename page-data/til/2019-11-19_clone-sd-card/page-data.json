{"componentChunkName":"component---src-templates-til-js","path":"/til/2019-11-19_clone-sd-card","result":{"data":{"markdownRemark":{"id":"0442beaa-4143-5c44-ad49-5d031a3c488b","html":"<p>Raspberry Pi 的操作系统写在 SD Card 中。如果想将这个当前的系统做克隆（用于备份或存储迁移），可以通过 <code class=\"language-text\">dd</code> 命令来进行。</p>\n<ol>\n<li>将原始的 SD Card 以及新的 SD Card 插入电脑；</li>\n<li>通过 <code class=\"language-text\">diskutil</code> 命令来查看当前两张 SD Card 在 <code class=\"language-text\">dev</code> 中分别的命名是怎样的：</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">diskutil list</code></pre></div>\n<p>运行后的结果大致如：</p>\n<div class=\"gatsby-highlight\" data-language=\"plain\"><pre class=\"language-plain\"><code class=\"language-plain\">/dev/disk2\n   #:                       TYPE NAME                    SIZE       IDENTIFIER\n  ...\n\n/dev/disk3\n   #:                       TYPE NAME                    SIZE       IDENTIFIER\n   ...</code></pre></div>\n<p>其中 <code class=\"language-text\">/dev/disk2</code> 和 <code class=\"language-text\">/dev/disk3</code> 就分别是插入的两个 SD Card（具体在不同的机器上可能有所不同，需要根据 <code class=\"language-text\">diskutil</code> 列出的数据进行区分）。</p>\n<p>接下来，需要将 <code class=\"language-text\">/dev/disk3</code>（也就是新的 SD Card）进行 unmount 操作，因为 SD Card 最终要写成的格式并不是 MacOS “理解”的格式（这里只是进行了 unmount，文件系统已经不可访问了，但是物理的 SD Card 依然是系统可以访问的，因而可以被写成任意的格式）：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">diskutil unmountDisk /dev/disk2</code></pre></div>\n<p>最后，使用 <code class=\"language-text\">dd</code> 命令进行数据的克隆就可以了：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">dd</span> <span class=\"token assign-left variable\">if</span><span class=\"token operator\">=</span>/dev/disk2 <span class=\"token assign-left variable\">of</span><span class=\"token operator\">=</span>/dev/disk3</code></pre></div>\n<p>当然，如果不需要克隆到新的 SD Card，只是做一个简单的备份，也可以将内容保存到本地的文件中：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">dd</span> <span class=\"token assign-left variable\">if</span><span class=\"token operator\">=</span>/dev/disk2 <span class=\"token assign-left variable\">of</span><span class=\"token operator\">=</span>/path/to/file.dmg</code></pre></div>\n<p>还原备份只需要：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">dd</span> <span class=\"token assign-left variable\">if</span><span class=\"token operator\">=</span>/path/to/file.dmg <span class=\"token assign-left variable\">of</span><span class=\"token operator\">=</span>/dev/disk3</code></pre></div>","frontmatter":{"title":"Clone SD Card","category":"Bash","date":"2019-11-19"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"time":"2019-11-19","title":"Clone SD Card","previous":{"time":"2019-11-18","title":"Ant Design Style Overwrite"},"next":{"time":"2019-11-20","title":"Progress of dd"}}}}