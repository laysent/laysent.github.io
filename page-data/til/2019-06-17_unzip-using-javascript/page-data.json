{"componentChunkName":"component---src-templates-til-js","path":"/til/2019-06-17_unzip-using-javascript","webpackCompilationHash":"d0c1c456129354e33ddb","result":{"data":{"markdownRemark":{"id":"b52b4bc6-f364-5715-a454-319cdd7e61b0","html":"<p>使用 JavaScript 库 <a href=\"https://www.npmjs.com/package/jszip\">jszip</a> 可以对传入的本地 zip 包进行解压缩并读取其中的文件。</p>\n<p>一段参考代码如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> filename <span class=\"token operator\">=</span> <span class=\"token string\">'example.txt'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">onDrop</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">:</span> DragEvent<span class=\"token operator\">&lt;</span>HTMLDivElement<span class=\"token operator\">></span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> file<span class=\"token punctuation\">:</span> File <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> zip <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> jszip<span class=\"token punctuation\">.</span><span class=\"token function\">loadAsync</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> content <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> zip<span class=\"token punctuation\">.</span>files<span class=\"token punctuation\">[</span>filename<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'content of example.txt: '</span><span class=\"token punctuation\">,</span> content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>这里，<code class=\"language-text\">loadAsync</code> 函数接受的参数是一个 <code class=\"language-text\">Blob</code>，而无论是 <code class=\"language-text\">input[type=file]</code> 还是通过 drag-n-drop 得到的文件（<code class=\"language-text\">File</code>），都是一种特殊的 <code class=\"language-text\">Blob</code>，因而可以直接传递给 <code class=\"language-text\">loadAsync</code> 使用。</p>\n<p><code class=\"language-text\">.async(&#39;text&#39;)</code> 可以将结果异步转化成字符串。API 也支持其他的格式类型，比如 ArrayBuffer 等。（<a href=\"https://stuk.github.io/jszip/documentation/api_zipobject/async.html\">文档</a>）</p>\n<p>除了读取内容之外，jszip 也支持创建修改 zip 包的内容。完整的 API 文档可以参考<a href=\"https://stuk.github.io/jszip/documentation/api_jszip.html\">这里</a>。</p>","frontmatter":{"title":"Unzip using JavaScript","category":"JavaScript","date":"2019-06-17"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"time":"2019-06-17","title":"Unzip using JavaScript","previous":{"time":"2019-06-16","title":"HashHistory & State"},"next":{"time":"2019-06-18","title":"SSH ProxyJump"}}}}