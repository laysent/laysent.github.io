{"componentChunkName":"component---src-templates-til-js","path":"/til/2019-11-21_export-variable-using-private-name","result":{"data":{"markdownRemark":{"id":"d4f2cc35-174d-5e24-86fa-274d23e4c9a1","html":"<p>在 TypeScript 编译过程中，可能会遇到如下的报错：</p>\n<div class=\"gatsby-highlight\" data-language=\"plain\"><pre class=\"language-plain\"><code class=\"language-plain\">Exported variable &lt;variable name&gt; has or is using private name &lt;private name&gt;</code></pre></div>\n<p>这一报错只会出现在开启了 declaration 输出之后。开启的方式是编译时增加 <code class=\"language-text\">--declaration</code>，或者在 tsconfig.json 中加入：</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"declaration\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>出现这一报错的原因是，最终被使用的某一个类型，引用到了某一个没有被公开（export）的类型。简单的例子如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">A</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">B</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">declare</span> <span class=\"token keyword\">type</span> Props <span class=\"token operator\">=</span> <span class=\"token constant\">A</span> <span class=\"token operator\">|</span> <span class=\"token constant\">B</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>这里，之所以会出现问题，理由很简单：TypeScript 试图输出一个定义类型的文件，其中就包括了 <code class=\"language-text\">Props</code> 的定义。然而，如果要明确定义 <code class=\"language-text\">Props</code>，就需要用到两个类型 <code class=\"language-text\">A</code> 和 <code class=\"language-text\">B</code>。在这里，<code class=\"language-text\">A</code> 和 <code class=\"language-text\">B</code> 这两个类型因为没有被公开（export），因而是私有（private）的。故，理论上来说，TypeScript 的导出定义文件中不应该包含这两个类型。而没有这两个类型的话，TypeScript 就没有办法定义 <code class=\"language-text\">Props</code> 了。最终，TypeScript 只能报错。</p>\n<p>官方给出的解释可以参考<a href=\"https://github.com/ant-design/ant-design/pull/19846#event-2817984936\">这里</a>。</p>\n<p>要解决这个问题，方法也很简单：所有使用到的类型，全部都公开（export）就好了。</p>","frontmatter":{"title":"Export Variable using Private Name","category":"TypeScript","date":"2019-11-21"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"time":"2019-11-21","title":"Export Variable using Private Name","previous":{"time":"2019-11-20","title":"Progress of dd"},"next":null}}}