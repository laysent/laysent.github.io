{"componentChunkName":"component---src-templates-til-per-month-js","path":"/til/2019/07","webpackCompilationHash":"bda10dc66575c4b19d6c","result":{"data":{"site":{"siteMetadata":{"title":"LaySent's Site"}},"allMarkdownRemark":{"edges":[{"node":{"id":"fb68eb7a-9f89-58aa-b99f-46cf66fee510","html":"<p><code class=\"language-text\">Array.from</code> 是 JavaScript 中一个较新的 API，可以将一个类数组或可迭代对象转化成一个真正的数组。</p>\n<p>类数组（array-like）常见于 DOM API 中取到的数据，比如 <code class=\"language-text\">.querySelectorAll</code>。得到的结果有 <code class=\"language-text\">.length</code> 属性，也可以通过下标获取到数据，但是本身却不是一个数组，没有 <code class=\"language-text\">Array.prototype</code> 上的 API 可以直接用。</p>\n<p>可迭代对象则是指那些定义了 <code class=\"language-text\">Symbol.iterator</code> 属性的对象。</p>\n<p><code class=\"language-text\">Array.from</code> 可以将上述的两种对象直接转化成一个标准的数组：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> iterable <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">*</span><span class=\"token punctuation\">[</span>Symbol<span class=\"token punctuation\">.</span>iterator<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">yield</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">yield</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>iterable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => [1, 2];</span>\n\n<span class=\"token keyword\">const</span> arrayLike <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'span'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>arrayLike<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// => [span, span, ...]</span></code></pre></div>\n<p>除了上述常见的应用之外，<code class=\"language-text\">Array.from</code> 还有一些特殊的应用。</p>\n<p>首先，只要指定了 <code class=\"language-text\">length</code> 属性，<code class=\"language-text\">Array.from</code> 就可以创建一个数组。这一行为可以用来创建一个指定长度的数组：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => [0, 1, 2, 3, 4]</span></code></pre></div>\n<p>其次，<code class=\"language-text\">Array.from</code> 函数其实接受不止一个参数。第二个参数是一个 map 函数，第三个参数是 <code class=\"language-text\">thisArg</code>，用于指定 map 函数的 <code class=\"language-text\">this</code> 对象。有了这个 map 函数的支持，上面这个例子就可以进一步改写成：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>在转化 DOM 类数组的时候，直接通过指定 map 函数进行进一步的转化，是比较方便的。可以省略一个 <code class=\"language-text\">.map</code> 函数的嵌套，也节省一个中间数组对象的创建。</p>\n<p><code class=\"language-text\">Array.prototype.map</code> 函数可以指定 <code class=\"language-text\">thisArg</code>，在 <code class=\"language-text\">Array.from</code> 中也可以通过第三个参数指定 <code class=\"language-text\">thisArg</code>。以下是一个例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> mapper <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  shift<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> i</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shift <span class=\"token operator\">+</span> i<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\nArray<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> mapper<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">,</span> mapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// => [1, 2, 3, 4, 5];</span></code></pre></div>\n<p>上述写法等价于：</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> length<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>mapper<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">,</span> mapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"date":"2019-07-02","title":"Array.from","category":"JavaScript"}}},{"node":{"id":"a15d5ec3-f51e-5b02-b94e-755ae016d367","html":"<p><code class=\"language-text\">object-fit</code> 这个 CSS 样式，是针对<strong>可替换元素</strong>（replaced element）设计的。一般来说，常见的可替换元素包含图片（<code class=\"language-text\">img</code>）或是视频（<code class=\"language-text\">video</code>）。这些可替换元素的大小是事先不确定的，在实际展示的时候，需要一定的规则来决定元素实际如何被放置到元素框中去。</p>\n<p>以下是几种 <code class=\"language-text\">object-fit</code> 的值及对应的显示效果（每种类型显示两个图片，第一张图片的原始尺寸大于元素显示的尺寸，第二张图片的原始尺寸小于元素显示的尺寸）：</p>\n<style>\np.container-2019-07-01 {\n  display: flex;\n  justify-content: center;\n}\np.container-2019-07-01 a {\n  box-shadow: none;\n}\np.container-2019-07-01 a img {\n  width: 500px;\n  height: 400px;\n  border: 3px solid red;\n  display: block;\n}\n</style>\n<section><h2>fill</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:fill\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:fill\" />\n  </a>\n</p><ul>\n<li>宽高比例：不保持</li>\n<li>显示范围：占满元素</li>\n<li>可能影响：显示结果宽高比失真；显示结果比原始尺寸大</li>\n</ul></section>\n<section><h2>contain</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:contain\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:contain\" />\n  </a>\n</p><ul>\n<li>宽高比例：保持</li>\n<li>显示范围：至少一轴占满，整体（另一轴）不超过元素</li>\n<li>可能影响：出现黑边（<a href=\"https://en.wikipedia.org/wiki/Letterboxing_(filming)\">letterboxed</a>）；显示结果比原始尺寸大</li>\n</ul></section>\n<section><h2>cover</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:cover\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:cover\" />\n  </a>\n</p><ul>\n<li>宽高比例：保持</li>\n<li>显示范围：至少一轴占满，整体（另一轴）可以超过元素</li>\n<li>可能影响：超出显示范围；显示结果比原始尺寸大</li>\n</ul></section>\n<section><h2>none</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:none\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:none\" />\n  </a>\n</p><ul>\n<li>宽高比例：保持</li>\n<li>显示范围：原始尺寸</li>\n<li>可能影响：超出显示范围</li>\n</ul></section>\n<section><h2>scale-down</h2><p class=\"container-2019-07-01\">\n  <a href=\"../../baseline-jpeg-demo.jpeg\" target=\"_blank\">\n    <img src=\"../../baseline-jpeg-demo.jpeg\" title=\"big image\" alt=\"big image\" style=\"object-fit:scale-down\" />\n  </a>\n</p>\n<p class=\"container-2019-07-01\">\n  <a href=\"../../favicon.ico\" target=\"_blank\">\n    <img src=\"../../favicon.ico\" title=\"small image\" alt=\"small image\" style=\"object-fit:scale-down\" />\n  </a>\n</p><p>使用 <code class=\"language-text\">none</code> 或者 <code class=\"language-text\">contain</code> 的规则进行显示。具体选择哪个规则，要看两个规则生成的最终效果，哪一个更小。换句话说，如果元素的原始尺寸两轴都小于元素的显示范围，就使用 <code class=\"language-text\">none</code> 进行显示，显示结果是原始元素的原始尺寸；否则就是用 <code class=\"language-text\">contain</code> 的方式进行显示，用黑边的方式将元素压缩到显示范围内完整显示。</p></section>","frontmatter":{"date":"2019-07-01","title":"object-fit","category":"CSS"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"startInMonth":"2019-07-01","endInMonth":"2019-07-31","time":"2019-07","previous":"2019-06","next":null}}}