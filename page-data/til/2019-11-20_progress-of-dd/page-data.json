{"componentChunkName":"component---src-templates-til-js","path":"/til/2019-11-20_progress-of-dd","result":{"data":{"markdownRemark":{"id":"80ff40b4-417e-59fe-8b49-49f477af38e5","html":"<p><code class=\"language-text\">dd</code> 是一个 Bash 命令，可以用于文件/硬盘的整体拷贝。比如，希望将 Raspberry Pi 的 SD 卡复制一份，就可以使用 <code class=\"language-text\">dd</code> 这个命令来进行。</p>\n<p>但是默认的 <code class=\"language-text\">dd</code> 命令并没有进度提示，在完整执行完之前，默认在 stdout 中不会看到任何输出。</p>\n<p>如果想要获得当前 <code class=\"language-text\">dd</code> 的执行进度，可以尝试如下的一些方法：</p>\n<ol>\n<li>通过 <code class=\"language-text\">Control + T</code> 将 <code class=\"language-text\">SIGINFO</code> 发送给 <code class=\"language-text\">dd</code> 命令，<code class=\"language-text\">dd</code> 收到后会输出当前的进度信息；</li>\n<li>类似的，也可以通过 <code class=\"language-text\">pkill</code> 命令将 <code class=\"language-text\">SIGINFO</code> 发送给 <code class=\"language-text\">dd</code>：<code class=\"language-text\">pkill -INFO -x dd</code>。</li>\n</ol>\n<p>其中，针对第二点的命令，可以写一个简单的脚本来定时输出当前的进度：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token keyword\">while</span> pgrep ^dd<span class=\"token punctuation\">;</span> <span class=\"token keyword\">do</span> <span class=\"token function\">pkill</span> -INFO <span class=\"token function\">dd</span><span class=\"token punctuation\">;</span> <span class=\"token function\">sleep</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">done</span></code></pre></div>\n<p><code class=\"language-text\">dd</code> 的输出结果示例如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"plain\"><pre class=\"language-plain\"><code class=\"language-plain\">1000+0 records in\n1000+0 records out\n67108864000 bytes transferred in 3.720346 secs (18038339571 bytes/sec)</code></pre></div>\n<p>更多方法（原理都是发送 <code class=\"language-text\">SIGINFO</code> 给 <code class=\"language-text\">dd</code>），可以参考<a href=\"https://www.commandlinefu.com/commands/view/11666/check-the-status-of-dd-in-progress-os-x\">这里</a>。</p>","frontmatter":{"title":"Progress of dd","category":"Bash","date":"2019-11-20"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"time":"2019-11-20","title":"Progress of dd","previous":{"time":"2019-11-19","title":"Clone SD Card"},"next":{"time":"2019-11-21","title":"Export Variable using Private Name"}}}}